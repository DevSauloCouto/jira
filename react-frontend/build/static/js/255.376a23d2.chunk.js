"use strict";(self.webpackChunkreact_frontend=self.webpackChunkreact_frontend||[]).push([[255],{3419:function(e,t,n){n.d(t,{UL:function(){return a},Ve:function(){return i},ow:function(){return c},rk:function(){return o}});var r=n(687).h.injectEndpoints({endpoints:function(e){return{authUser:e.query({query:function(){return{url:"user/authUser",credentials:"include"}},providesTags:["AuthUser"]}),publicUser:e.query({query:function(e){return{url:"user/".concat(e),credentials:"include"}}}),updateAuthUser:e.mutation({query:function(e){return{url:"user/authUser/update",method:"PATCH",body:e,credentials:"include"}},invalidatesTags:["AuthUser"]})}},overrideExisting:!1}),a=r.useAuthUserQuery,i=r.useUpdateAuthUserMutation,c=r.usePublicUserQuery,o=function(){return r.useAuthUserQuery(void 0,{selectFromResult:function(e){return{authUser:e.data}}})}},2037:function(e,t,n){var r=n(4569),a=n.n(r)().create({baseURL:"https://jira-clone.onrender.com/",withCredentials:!0});t.Z=a},429:function(e,t,n){n.d(t,{Rw:function(){return a},ad:function(){return o},er:function(){return i},xH:function(){return c}});var r=n(687).h.injectEndpoints({endpoints:function(e){return{members:e.query({query:function(e){return{url:"project/".concat(e,"/members"),credentials:"include"}},providesTags:["Members"]}),removeMember:e.mutation({query:function(e){return{url:"member/remove",method:"DELETE",body:e,credentials:"include"}},invalidatesTags:["Members"]}),addMember:e.mutation({query:function(e){return{url:"member/add",method:"PUT",body:e,credentials:"include"}},invalidatesTags:["Members"]})}},overrideExisting:!1}),a=r.useMembersQuery,i=r.useRemoveMemberMutation,c=r.useAddMemberMutation,o=function(e){return r.useMembersQuery(e,{selectFromResult:function(e){return{members:e.data}}})}},4799:function(e,t,n){n.d(t,{BD:function(){return p},GW:function(){return f},JV:function(){return v},Sy:function(){return d},ec:function(){return h},m2:function(){return b},n5:function(){return m}});var r=n(4165),a=n(1413),i=n(5861),c=n(5987),o=n(687),s=["projectId"],u=["id"],l=o.h.injectEndpoints({endpoints:function(e){return{projects:e.query({query:function(e){return{url:"user/".concat(e,"/projects"),credentials:"include"}},providesTags:["Project"]}),project:e.query({query:function(e){return{url:"project/"+e,credentials:"include"}},providesTags:["Project"]}),createProject:e.mutation({query:function(e){return{url:"project/create",method:"POST",body:e,credentials:"include"}},invalidatesTags:["Project"]}),deleteProject:e.mutation({query:function(e){return{url:"project/".concat(e,"/delete"),method:"DELETE",credentials:"include"}},invalidatesTags:["Project"]}),leaveProject:e.mutation({query:function(e){var t=e.projectId,n=(0,c.Z)(e,s);return{url:"project/".concat(t,"/leave"),method:"DELETE",body:n,credentials:"include"}},invalidatesTags:["Project"]}),updateProject:e.mutation({query:function(e){return{url:"project/".concat(e.id),method:"PUT",body:e,credentials:"include"}},invalidatesTags:["Project"],onQueryStarted:function(e,t){return(0,i.Z)((0,r.Z)().mark((function n(){var i,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=e.id,o=(0,c.Z)(e,u),(0,t.dispatch)(l.util.updateQueryData("project",i,(function(e){return(0,a.Z)((0,a.Z)({},e),o)})));case 3:case"end":return n.stop()}}),n)})))()}})}},overrideExisting:!1}),d=l.useProjectsQuery,m=l.useProjectQuery,p=l.useCreateProjectMutation,f=l.useUpdateProjectMutation,b=l.useLeaveProjectMutation,h=l.useDeleteProjectMutation,v=function(e){return l.useProjectQuery(e,{selectFromResult:function(e){return{project:e.data}}})}},3255:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r,a=n(1413),i=n(9439),c=n(9637),o=n(4190),s=n(1134),u=n(1465),l=n(4165),d=n(5861),m=n(2791),p=n(429),f=n(5777),b=n(9333),h=n(2711),v=n(184),x=function(e){var t=e.id,n=e.username,r=e.email,a=e.profileUrl,c=e.added,s=e.projectId,u=e.setInput,l=(0,p.xH)(),d=(0,i.Z)(l,1)[0];return(0,v.jsxs)(f.zx,{onClick:function(){d({userId:t,projectId:s}),u("")},pointerEvents:c?"none":"auto",justifyContent:"start",alignItems:"center",colorScheme:"gray",rounded:"sm",w:"full",py:6,mb:1,children:[(0,v.jsx)(b.qE,{size:"sm",src:a}),(0,v.jsx)(o.xv,{mx:3,children:n}),(0,v.jsx)(o.xv,{overflow:"hidden",textOverflow:"ellipsis",fontWeight:400,fontSize:14,ml:"auto",children:r}),c&&(0,v.jsx)(h.JO,{className:"ml-3",icon:"teenyicons:tick-circle-outline"})]})},g=n(2037),j=(0,m.lazy)((function(){return n.e(781).then(n.bind(n,6781))})),y=function(e){var t=e.projectId,n=e.readOnly,c=e.members,o=(0,p.er)(),s=(0,i.Z)(o,1)[0],u=(0,m.useState)(null),f=(0,i.Z)(u,2),b=f[0],h=f[1],g=(0,m.useState)([]),y=(0,i.Z)(g,2),Z=y[0],k=y[1],E=(0,m.useState)(""),S=(0,i.Z)(E,2),w=S[0],I=S[1],_=(0,m.useState)(!1),P=(0,i.Z)(_,2),q=P[0],T=P[1],U=(0,m.useState)(!1),M=(0,i.Z)(U,2),C=M[0],A=M[1],O=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&c){e.next=2;break}return e.abrupt("return");case 2:n=c[b],s({projectId:t,memberId:n.id,userId:n.userId}),h(null),A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"text-sm tracking-wide text-c-5",children:"Members"}),(0,v.jsx)("input",{value:w,onChange:function(e){clearTimeout(r);var t=e.target.value;if(I(t),!t)return k([]);T(!0),r=setTimeout((0,d.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,N(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1),T(!1);case 6:case"end":return e.stop()}}),e)}))),1e3)},placeholder:"username",className:"block w-full focus:border-chakra-blue mt-2 px-3 rounded-sm text-sm py-[3px] border-2 duration-200 outline-none border-transparent hover:bg-c-7 focus:bg-c-1 bg-c-6 text-c-text ".concat(n?"pointer-events-none":""),readOnly:n}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:c?c.map((function(e,t){var r=e.username,a=e.id,i=e.isAdmin;return(0,v.jsx)("div",{onClick:function(){return h(i?null:t)},className:"px-2 tracking-wide font-semibold text-sm border-[1px]  ".concat(i?"bg-blue-500 text-white":"text-blue-400 hover:opacity-90 cursor-pointer"," ").concat(b===t?"border-green-400 text-green-400":"border-blue-400"," ").concat(n?"pointer-events-none":""),children:r+(i?" *":"")},a)})):"loading ..."}),b&&!n&&(0,v.jsxs)("div",{className:"pt-4 flex justify-end gap-x-3 border-t-[.5px] border-gray-400 mt-3",children:[(0,v.jsx)("button",{onClick:function(){return h(null)},className:"btn text-[13px] tracking-wide bg-transparent hover:bg-c-2 text-c-text",children:"cancel"}),(0,v.jsx)("button",{onClick:function(){return A(!0)},className:"btn text-[13px] tracking-wide bg-red-500 hover:bg-red-600",children:"Remove member"})]})]}),w?(0,v.jsx)("div",{className:"absolute top-0 rounded-[3px] bg-white w-full shadow-sm p-[8px_12px_22px] z-10 border-[1px]",children:q?(0,v.jsx)("span",{className:"text-center block mt-2",children:"searching ..."}):0===Z.length?(0,v.jsx)("span",{className:"text-center block mt-2",children:"not user was found :("}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"text-sm mb-2 block",children:"Is this the one?"}),Z.map((function(e){var n;return(0,v.jsx)(x,(0,a.Z)({projectId:t,setInput:I,added:null!==(n=null===c||void 0===c?void 0:c.some((function(t){return t.userId===e.id})))&&void 0!==n&&n},e),e.id)}))]})}):null]}),C&&(0,v.jsx)(m.Suspense,{children:(0,v.jsx)(j,{msg:"remove "+(null===c||void 0===c?void 0:c[b].username),onClose:function(){return A(!1)},onSubmit:O})})]})},Z=(0,m.memo)(y),N=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("api/user/search?q="+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(4799),E=n(6871),S=n(3419),w=function(){var e=(0,k.GW)(),t=(0,i.Z)(e,2),n=t[0],r=t[1],l=r.isLoading,d=r.isSuccess,m=Number((0,E.UO)().projectId),f=(0,p.ad)(m).members,b=(0,S.rk)().authUser,h=(0,k.JV)(m).project,x=(0,s.cI)(),g=x.register,j=x.handleSubmit,y=x.formState.errors;if(!h||!f||!b)return null;var N=h.id,w=h.name,I=h.descr,_=h.repo,P=f.filter((function(e){return e.userId===b.id}))[0].isAdmin;console.log(P);return(0,v.jsx)(c.xjn,{children:(0,v.jsxs)("div",{className:"mt-10 px-10",children:[(0,v.jsx)("h1",{className:"mb-4 text-xl font-semibold text-c-text",children:"Project Setting"}),(0,v.jsxs)("form",{onSubmit:j((function(e){e.name===w&&e.descr===I&&e.repo===_||n((0,a.Z)({id:N},e))})),children:[(0,v.jsxs)(o.Kq,{spacing:4,maxW:480,children:[(0,v.jsx)(u.Z,{defaultValue:w,label:"Name",placeholder:"project name",register:g("name",{required:{value:!0,message:"name must not be empty"}}),error:y.name,darkEnabled:!0,readOnly:!P}),(0,v.jsx)(u.Z,{defaultValue:I,label:"Description",placeholder:"project description",register:g("descr"),error:y.descr,darkEnabled:!0,readOnly:!P}),(0,v.jsx)(u.Z,{defaultValue:_,label:"Repository",placeholder:"github repo link",register:g("repo"),error:y.repo,darkEnabled:!0,readOnly:!P}),(0,v.jsx)(Z,{members:f,projectId:N,readOnly:!P})]}),(0,v.jsxs)("div",{className:"mt-6",children:[!P&&(0,v.jsx)("span",{className:"block text-red-400 text-sm",children:"* Only Admin can edit the project setting *"}),(0,v.jsx)("button",{disabled:!P,className:"btn mt-3 ".concat(P?"":"pointer-event-none cursor-not-allowed"),children:d?"Saved Changes":l?"saving ...":"Save Changes"})]})]})]})})}},1465:function(e,t,n){var r=n(1413),a=n(184);t.Z=function(e){var t,n=e.darkEnabled,i=void 0!==n&&n,c=e.register,o=e.error,s=e.placeholder,u=e.label,l=e.defaultValue,d=e.readOnly,m=e.autoFocus,p=e.inputClass,f=e.type;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm tracking-wide ".concat(i?"text-c-5":"text-gray-800"),children:u}),(0,a.jsx)("input",(0,r.Z)({defaultValue:null!==l&&void 0!==l?l:"",className:"block w-full focus:border-chakra-blue mt-2 px-3 rounded-sm text-sm py-[3px] border-2 duration-200 outline-none ".concat(i?"hover:bg-c-7 focus:bg-c-1 bg-c-6 text-c-text":"bg-slate-100 hover:border-gray-400"," ").concat(null!==p&&void 0!==p?p:" border-transparent"," ").concat(d?"pointer-events-none":""),placeholder:s,readOnly:d,autoFocus:m,type:f},c)),(0,a.jsx)("span",{className:"text-[13px] text-red-400",children:null===o||void 0===o||null===(t=o.message)||void 0===t?void 0:t.toString()})]})}},5777:function(e,t,n){n.d(t,{zx:function(){return S}});var r=n(4942),a=n(1413),i=n(5987),c=n(9439),o=n(2791),s=n(1507),u=n(251),l=n(2965),d=n(2680),m=n(9194),p=["children","className"],f=["label","placement","spacing","children","className","__css"],b=["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],h=["size","colorScheme","variant","className","spacing","isAttached","isDisabled"],v=["icon","children","isRound","aria-label"],x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},g=function(e){return e?"":void 0},j=(0,d.k)({strict:!1,name:"ButtonGroupContext"}),y=(0,c.Z)(j,2),Z=y[0],N=y[1];function k(e){var t=e.children,n=e.className,r=(0,i.Z)(e,p),c=(0,o.isValidElement)(t)?(0,o.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,s=x("chakra-button__icon",n);return o.createElement(u.m$.span,(0,a.Z)((0,a.Z)({display:"inline-flex",alignSelf:"center",flexShrink:0},r),{},{className:s}),c)}function E(e){var t=e.label,n=e.placement,c=e.spacing,s=void 0===c?"0.5rem":c,l=e.children,d=void 0===l?o.createElement(m.$,{color:"currentColor",width:"1em",height:"1em"}):l,p=e.className,b=e.__css,h=(0,i.Z)(e,f),v=x("chakra-button__spinner",p),g="start"===n?"marginEnd":"marginStart",j=(0,o.useMemo)((function(){var e;return(0,a.Z)((e={display:"flex",alignItems:"center",position:t?"relative":"absolute"},(0,r.Z)(e,g,t?s:0),(0,r.Z)(e,"fontSize","1em"),(0,r.Z)(e,"lineHeight","normal"),e),b)}),[b,t,g,s]);return o.createElement(u.m$.div,(0,a.Z)((0,a.Z)({className:v},h),{},{__css:j}),d)}k.displayName="ButtonIcon",E.displayName="ButtonSpinner";var S=(0,u.Gp)((function(e,t){var n=N(),r=(0,u.mq)("Button",(0,a.Z)((0,a.Z)({},n),e)),d=(0,l.Lr)(e),m=d.isDisabled,p=void 0===m?null==n?void 0:n.isDisabled:m,f=d.isLoading,h=d.isActive,v=d.children,j=d.leftIcon,y=d.rightIcon,Z=d.loadingText,k=d.iconSpacing,S=void 0===k?"0.5rem":k,I=d.type,_=d.spinner,P=d.spinnerPlacement,q=void 0===P?"start":P,T=d.className,U=d.as,M=(0,i.Z)(d,b),C=(0,o.useMemo)((function(){var e=(0,a.Z)((0,a.Z)({},null==r?void 0:r._focus),{},{zIndex:1});return(0,a.Z)((0,a.Z)({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},r),!!n&&{_focus:e})}),[r,n]),A=function(e){var t=(0,o.useState)(!e),n=(0,c.Z)(t,2),r=n[0],a=n[1];return{ref:(0,o.useCallback)((function(e){e&&a("BUTTON"===e.tagName)}),[]),type:r?"button":void 0}}(U),O=A.ref,R=A.type,D={rightIcon:y,leftIcon:j,iconSpacing:S,children:v};return o.createElement(u.m$.button,(0,a.Z)({disabled:p||f,ref:(0,s.qq)(t,O),as:U,type:null!==I&&void 0!==I?I:R,"data-active":g(h),"data-loading":g(f),__css:C,className:x("chakra-button",T)},M),f&&"start"===q&&o.createElement(E,{className:"chakra-button__spinner--start",label:Z,placement:"start",spacing:S},_),f?Z||o.createElement(u.m$.span,{opacity:0},o.createElement(w,(0,a.Z)({},D))):o.createElement(w,(0,a.Z)({},D)),f&&"end"===q&&o.createElement(E,{className:"chakra-button__spinner--end",label:Z,placement:"end",spacing:S},_))}));function w(e){var t=e.leftIcon,n=e.rightIcon,r=e.children,a=e.iconSpacing;return o.createElement(o.Fragment,null,t&&o.createElement(k,{marginEnd:a},t),r,n&&o.createElement(k,{marginStart:a},n))}S.displayName="Button",(0,u.Gp)((function(e,t){var n=e.size,r=e.colorScheme,c=e.variant,s=e.className,l=e.spacing,d=void 0===l?"0.5rem":l,m=e.isAttached,p=e.isDisabled,f=(0,i.Z)(e,h),b=x("chakra-button__group",s),v=(0,o.useMemo)((function(){return{size:n,colorScheme:r,variant:c,isDisabled:p}}),[n,r,c,p]),g={display:"inline-flex"};return g=m?(0,a.Z)((0,a.Z)({},g),{},{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}}):(0,a.Z)((0,a.Z)({},g),{},{"& > *:not(style) ~ *:not(style)":{marginStart:d}}),o.createElement(Z,{value:v},o.createElement(u.m$.div,(0,a.Z)({ref:t,role:"group",__css:g,className:b,"data-attached":m?"":void 0},f)))})).displayName="ButtonGroup",(0,u.Gp)((function(e,t){var n=e.icon,r=e.children,c=e.isRound,s=e["aria-label"],u=(0,i.Z)(e,v),l=n||r,d=(0,o.isValidElement)(l)?(0,o.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return o.createElement(S,(0,a.Z)({padding:"0",borderRadius:c?"full":void 0,ref:t,"aria-label":s},u),d)})).displayName="IconButton"}}]);
//# sourceMappingURL=255.376a23d2.chunk.js.map