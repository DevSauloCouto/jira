{"version":3,"file":"static/js/486.ca1a4576.chunk.js","mappings":"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","sources":["api/auth.endpoint.ts","api/axios.ts","components/auth/Adios.tsx","components/util/InputWithValidation.tsx","../node_modules/@babel/runtime/helpers/esm/typeof.js"],"sourcesContent":["import { api } from './api';\nimport { AuthUser, PublicUser, updateAuthUser } from './apiTypes';\n\nexport const extendedApi = api.injectEndpoints({\n  endpoints: (builder) => ({\n    authUser: builder.query<AuthUser, void>({\n      query: () => ({ url: 'user/authUser', credentials: 'include' }),\n      providesTags: ['AuthUser'],\n    }),\n    publicUser: builder.query<PublicUser, number>({\n      query: (id) => ({ url: `user/${id}`, credentials: 'include' }),\n    }),\n    updateAuthUser: builder.mutation<AuthUser, updateAuthUser>({\n      query: (body) => ({\n        url: 'user/authUser/update',\n        method: 'PATCH',\n        body,\n        credentials: 'include',\n      }),\n      invalidatesTags: ['AuthUser'],\n    }),\n  }),\n  overrideExisting: false,\n});\n\nexport const { useAuthUserQuery, useUpdateAuthUserMutation, usePublicUserQuery } = extendedApi;\n\n// selectors\nexport const selectAuthUser = () =>\n  extendedApi.useAuthUserQuery(undefined, {\n    selectFromResult: ({ data }) => ({ authUser: data }),\n  });\n","import axios from 'axios';\n\nconst axiosDf = axios.create({\n  baseURL: 'https://jira-clone.onrender.com/',\n  withCredentials: true,\n});\n\nexport default axiosDf;\n","import { FieldError, FieldValues, useForm } from 'react-hook-form';\nimport { useState } from 'react';\nimport { AxiosError } from 'axios';\nimport InputWithValidation from '../util/InputWithValidation';\nimport { useAuthUserQuery } from '../../api/auth.endpoint';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { APIERROR } from '../../api/apiTypes';\nimport axiosDf from '../../api/axios';\n\nfunction Adios() {\n  const {\n    register,\n    formState: { errors, isSubmitting: loading },\n    handleSubmit,\n  } = useForm();\n  const { data: authUser, error } = useAuthUserQuery();\n  const [submitError, setSubmitError] = useState('');\n  const navigate = useNavigate();\n\n  if (error && (error as APIERROR).status === 401) return <Navigate to='/login' />;\n\n  if (!authUser) return null;\n\n  const name = authUser.username;\n\n  const onSubmit = async (form: FieldValues) => {\n    setSubmitError('');\n    if (form.name.trim() !== name) return setSubmitError(\"the name doesn't match\");\n    try {\n      await deleteACC(form);\n      navigate('/login');\n    } catch (error) {\n      setSubmitError(((error as AxiosError).response?.data as APIERROR).message);\n    }\n  };\n\n  return (\n    <main className='grid place-items-center w-full bg-[#eee]'>\n      <div className='bg-white px-8 pt-12 pb-14 rounded-md w-[25rem]'>\n        <h1 className='text-xl'>You are about to delete your account</h1>\n        <form onSubmit={handleSubmit(onSubmit)} className='mt-6 flex flex-col gap-5'>\n          <InputWithValidation\n            label='Please enter your password'\n            placeholder='account password'\n            register={register('pwd', {\n              required: { value: true, message: 'password must not be empty' },\n              minLength: { value: 4, message: 'must be at least 4 characters long' },\n              maxLength: { value: 14, message: 'must be under 15 characters' },\n            })}\n            error={errors.pwd as FieldError}\n            inputClass='border-gray-500'\n          />\n          <div>\n            <span>\n              Please type \"<span className='text-blue-500'>{name}</span>\" to confirm\n            </span>\n            <InputWithValidation\n              label=''\n              placeholder={name}\n              register={register('name', {\n                required: { value: true, message: 'please fill the box' },\n              })}\n              error={errors.name as FieldError}\n              inputClass='border-gray-500'\n            />\n          </div>\n          <div className='mt-2'>\n            {submitError && <span className='text-red-500'>{submitError}</span>}\n            <button className='btn mt-2 w-full'>\n              {loading ? 'deleting ...' : 'Delete my account'}\n            </button>\n            <button\n              type='button'\n              onClick={() => navigate(-1)}\n              className='btn-crystal w-full hover:bg-slate-100 mt-3 underline'\n            >\n              go back\n            </button>\n          </div>\n        </form>\n      </div>\n    </main>\n  );\n}\n\nexport default Adios;\n\nconst deleteACC = async (body: FieldValues) => {\n  const result = await axiosDf.post('api/user/authUser/delete', body, {\n    withCredentials: true,\n  });\n  return result.data;\n};\n","import { FieldError, UseFormRegisterReturn } from 'react-hook-form';\n\nconst InputWithValidation = (props: Props) => {\n  const {\n    darkEnabled = false,\n    register,\n    error,\n    placeholder,\n    label,\n    defaultValue,\n    readOnly,\n    autoFocus,\n    inputClass,\n    type,\n  } = props;\n  return (\n    <div>\n      <label className={`text-sm tracking-wide ${darkEnabled ? 'text-c-5' : 'text-gray-800'}`}>\n        {label}\n      </label>\n      <input\n        defaultValue={defaultValue ?? ''}\n        className={`block w-full focus:border-chakra-blue mt-2 px-3 rounded-sm text-sm py-[3px] border-2 duration-200 outline-none ${\n          darkEnabled\n            ? 'hover:bg-c-7 focus:bg-c-1 bg-c-6 text-c-text'\n            : 'bg-slate-100 hover:border-gray-400'\n        } ${inputClass ?? ' border-transparent'} ${readOnly ? 'pointer-events-none' : ''}`}\n        {...{ placeholder, readOnly, autoFocus, type }}\n        {...register}\n      />\n      <span className='text-[13px] text-red-400'>{error?.message?.toString()}</span>\n    </div>\n  );\n};\n\nexport default InputWithValidation;\n\ntype Props = {\n  register: UseFormRegisterReturn;\n  error: FieldError;\n  placeholder?: string;\n  label: string;\n  defaultValue?: string;\n  readOnly?: boolean;\n  autoFocus?: boolean;\n  darkEnabled?: boolean;\n  inputClass?: string;\n  type?: string;\n};\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}"],"names":["extendedApi","api","endpoints","builder","authUser","query","url","credentials","providesTags","publicUser","id","updateAuthUser","mutation","body","method","invalidatesTags","overrideExisting","useAuthUserQuery","useUpdateAuthUserMutation","usePublicUserQuery","selectAuthUser","undefined","selectFromResult","data","axiosDf","axios","baseURL","withCredentials","useForm","register","formState","errors","loading","isSubmitting","handleSubmit","error","useState","submitError","setSubmitError","navigate","useNavigate","status","to","name","username","onSubmit","form","trim","deleteACC","response","message","className","label","placeholder","required","value","minLength","maxLength","pwd","inputClass","type","onClick","result","props","darkEnabled","defaultValue","readOnly","autoFocus","toString","_typeof","obj","Symbol","iterator","constructor","prototype"],"sourceRoot":""}