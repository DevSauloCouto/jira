"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[627],{3419:function(e,r,t){t.d(r,{UL:function(){return s},Ve:function(){return i},ow:function(){return c},rk:function(){return a}});var n=t(687).h.injectEndpoints({endpoints:function(e){return{authUser:e.query({query:function(){return{url:"user/authUser",credentials:"include"}},providesTags:["AuthUser"]}),publicUser:e.query({query:function(e){return{url:"user/".concat(e),credentials:"include"}}}),updateAuthUser:e.mutation({query:function(e){return{url:"user/authUser/update",method:"PATCH",body:e,credentials:"include"}},invalidatesTags:["AuthUser"]})}},overrideExisting:!1}),s=n.useAuthUserQuery,i=n.useUpdateAuthUserMutation,c=n.usePublicUserQuery,a=function(){return n.useAuthUserQuery(void 0,{selectFromResult:function(e){return{authUser:e.data}}})}},2037:function(e,r,t){var n=t(4569),s=t.n(n)().create({baseURL:"https://jira-clone.onrender.com/",withCredentials:!0});r.Z=s},429:function(e,r,t){t.d(r,{Rw:function(){return s},ad:function(){return a},er:function(){return i},xH:function(){return c}});var n=t(687).h.injectEndpoints({endpoints:function(e){return{members:e.query({query:function(e){return{url:"project/".concat(e,"/members"),credentials:"include"}},providesTags:["Members"]}),removeMember:e.mutation({query:function(e){return{url:"member/remove",method:"DELETE",body:e,credentials:"include"}},invalidatesTags:["Members"]}),addMember:e.mutation({query:function(e){return{url:"member/add",method:"PUT",body:e,credentials:"include"}},invalidatesTags:["Members"]})}},overrideExisting:!1}),s=n.useMembersQuery,i=n.useRemoveMemberMutation,c=n.useAddMemberMutation,a=function(e){return n.useMembersQuery(e,{selectFromResult:function(e){return{members:e.data}}})}},4799:function(e,r,t){t.d(r,{BD:function(){return m},GW:function(){return h},JV:function(){return f},Sy:function(){return d},ec:function(){return j},m2:function(){return p},n5:function(){return x}});var n=t(4165),s=t(1413),i=t(5861),c=t(5987),a=t(687),o=["projectId"],l=["id"],u=a.h.injectEndpoints({endpoints:function(e){return{projects:e.query({query:function(e){return{url:"user/".concat(e,"/projects"),credentials:"include"}},providesTags:["Project"]}),project:e.query({query:function(e){return{url:"project/"+e,credentials:"include"}},providesTags:["Project"]}),createProject:e.mutation({query:function(e){return{url:"project/create",method:"POST",body:e,credentials:"include"}},invalidatesTags:["Project"]}),deleteProject:e.mutation({query:function(e){return{url:"project/".concat(e,"/delete"),method:"DELETE",credentials:"include"}},invalidatesTags:["Project"]}),leaveProject:e.mutation({query:function(e){var r=e.projectId,t=(0,c.Z)(e,o);return{url:"project/".concat(r,"/leave"),method:"DELETE",body:t,credentials:"include"}},invalidatesTags:["Project"]}),updateProject:e.mutation({query:function(e){return{url:"project/".concat(e.id),method:"PUT",body:e,credentials:"include"}},invalidatesTags:["Project"],onQueryStarted:function(e,r){return(0,i.Z)((0,n.Z)().mark((function t(){var i,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.id,a=(0,c.Z)(e,l),(0,r.dispatch)(u.util.updateQueryData("project",i,(function(e){return(0,s.Z)((0,s.Z)({},e),a)})));case 3:case"end":return t.stop()}}),t)})))()}})}},overrideExisting:!1}),d=u.useProjectsQuery,x=u.useProjectQuery,m=u.useCreateProjectMutation,h=u.useUpdateProjectMutation,p=u.useLeaveProjectMutation,j=u.useDeleteProjectMutation,f=function(e){return u.useProjectQuery(e,{selectFromResult:function(e){return{project:e.data}}})}},4627:function(e,r,t){t.r(r),t.d(r,{default:function(){return A}});var n=t(6871),s=t(9637),i=t(8342),c=t(2711),a=t(3504),o=t(4799),l=t(184),u=function(){var e,r,t=(0,n.TH)().pathname.slice(1).split("/"),u=(0,o.n5)(null!==(e=Number(t[1]))&&void 0!==e?e:-1).data;return(0,l.jsx)(s.xjn,{children:(0,l.jsx)("div",{className:"mt-8 mb-4 px-10 min-w-max",children:(0,l.jsxs)(i.aG,{className:"text-c-text",spacing:"8px",separator:(0,l.jsx)(c.JO,{className:"inline text-xl",icon:"ei:chevron-right"}),children:[t[0]&&(0,l.jsx)(i.gN,{children:(0,l.jsx)(a.rU,{to:"/project/",className:"hover:underline",children:"project"})}),t[1]&&(0,l.jsx)(i.gN,{children:(0,l.jsx)(a.rU,{to:"/project/"+t[1],className:"hover:underline",children:null!==(r=null===u||void 0===u?void 0:u.name)&&void 0!==r?r:"undefined"})}),t[2]&&(0,l.jsx)(i.gN,{isCurrentPage:!0,children:(0,l.jsx)(a.rU,{to:"/project/".concat(t[1],"/board"),className:"hover:underline",children:"Kanban board"})})]})})})},d=t(9439),x=t(2791),m=t(2796),h=function(e){var r=e.icon,t=e.text,n=e.iconSize,s=e.to;return(0,l.jsx)("li",{className:"list-none",children:(0,l.jsxs)(a.rU,{to:s,className:"flex cursor-pointer items-center rounded-[3px] px-3 py-[10px] text-left text-c-5 duration-200 hover:bg-c-2 active:bg-c-2",children:[(0,l.jsx)(c.JO,{className:"",width:null!==n&&void 0!==n?n:22,icon:r}),(0,l.jsx)("span",{className:"ml-3 text-[15px]",children:t})]})})},p=function(){var e,r=Number((0,n.UO)().projectId),t=(0,x.useState)(!0),s=(0,d.Z)(t,2),i=s[0],a=s[1],u=(0,o.n5)(r,{skip:!r}).data;return(0,l.jsxs)(m.E.div,{initial:{width:r?240:15},animate:{width:r&&i?240:15},transition:{type:"tween"},className:"relative bg-c-2",children:[r?(0,l.jsxs)("div",{className:"h-full w-[15rem] bg-c-2 px-4 py-6",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"h-10 w-10 shrink-0 bg-cyan-500"}),(0,l.jsxs)("div",{className:"ml-2 w-40",children:[(0,l.jsx)("span",{className:"block text-sm font-medium truncate text-c-5",children:null!==(e=null===u||void 0===u?void 0:u.name)&&void 0!==e?e:"loading..."}),(0,l.jsx)("span",{className:"text-[13px] text-c-text",children:"Project Planning"})]})]}),(0,l.jsxs)("div",{className:"my-5",children:[(0,l.jsx)(h,{to:r+"/board",icon:"bi:kanban",text:"Kanban Board"}),(0,l.jsx)(h,{to:r+"",icon:"clarity:settings-solid",text:"Project Setting"})]}),(0,l.jsx)("hr",{className:"border-t-[.5px] border-gray-400"})]}):null,(0,l.jsx)("button",{title:"Toggle project sidebar",onClick:function(){return a((function(e){return!e}))},className:"group peer absolute -right-[14px] z-[20] top-8 grid h-7 w-7 place-items-center rounded-full border-[1px] border-zinc-text00 bg-c-1 hover:border-secondary hover:bg-secondary ".concat(r&&u?"":"pointer-events-none"),children:(0,l.jsx)(c.JO,{className:"text-secondary group-hover:text-white",icon:i?"fa-solid:angle-left":"fa-solid:angle-right"})}),(0,l.jsx)("div",{className:"absolute top-0 right-0 h-full w-[2px] bg-c-3 peer-hover:bg-secondary"})]})},j=t(1413),f=t(824),v=t(3419),b=t(4165),g=t(5861),y=t(9591),N=t(6503),w=t(1134),k=t(1465),Z=t(320),P=function(e){var r=e.onClose,t=(0,v.UL)().data,n=(0,o.BD)(),s=(0,d.Z)(n,1)[0],i=(0,w.cI)(),c=i.register,a=i.handleSubmit,u=i.formState,x=u.errors,m=u.isSubmitting,h=function(){var e=(0,g.Z)((0,b.Z)().mark((function e(n){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,s((0,j.Z)((0,j.Z)({},n),{},{userId:t.id}));case 5:r(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(r){return e.apply(this,arguments)}}();return(0,l.jsx)(Z.Z,{onSubmit:a(h),onClose:r,isLoading:m,children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)("span",{className:"font-[600] text-[22px] text-c-text",children:"Create Project"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(k.Z,{label:"Project name",placeholder:"name of your project",register:c("name",{required:{value:!0,message:"Project name must not be empty"}}),error:x.name,autoFocus:!0}),(0,l.jsx)(k.Z,{label:"Short description",placeholder:"describe your project in a few words",register:c("descr"),error:x.descr}),(0,l.jsx)(k.Z,{label:"Repository link",placeholder:"link to the Project's repository",register:c("repo"),error:x.repo})]}),t&&(0,l.jsx)(y.Z,{label:"Members",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"bg-c-6 mb-2 py-[2px] px-3 text-sm border-[1px] rounded-sm border-gray-300 text-c-text",children:(0,l.jsx)(N.Z,{text:t.username,icon:t.profileUrl,className:"w-6 h-6 mr-4 rounded-full object-cover"})}),(0,l.jsx)("span",{className:"text-sm text-c-text",children:"* you can add more members after creating the project *"})]})})]})})},C=t(429),U=(0,x.lazy)((function(){return t.e(565).then(t.bind(t,2565))})),T=function(e){var r=e.idx,t=e.id,s=e.name,i=e.descr,a=(e.repo,e.userId),o=e.authUserId,u=(0,C.ad)(t).members,m=(0,v.ow)(a).data,h=(0,x.useState)(!1),p=(0,d.Z)(h,2),j=p[0],f=p[1],b=(0,n.s0)();if(!u)return null;var g=u.filter((function(e){return e.userId===o}))[0],y=g.isAdmin,N=g.id;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex border-c-3 border-y-2 relative group border-t-transparent py-1 cursor-pointer hover:border-blue-400 hover:border-t-2",onClick:function(){return b(t+"/board")},children:[(0,l.jsx)("div",{className:"text-center w-8",children:r+1}),(0,l.jsx)("div",{className:"grow px-2",children:s}),(0,l.jsx)("div",{className:"grow px-2",children:i}),(0,l.jsxs)("div",{className:"w-52 px-2",children:[null===m||void 0===m?void 0:m.username,y?(0,l.jsx)("span",{className:"text-sm ml-1 font-bold",children:"(you)"}):""]}),(0,l.jsx)("button",{title:"Delete or Leave",onClick:function(e){e.stopPropagation(),f(!0)},className:"icon-btn ml-5 absolute right-0 bg-c-1 hidden group-hover:block",children:(0,l.jsx)(c.JO,{icon:"bx:trash",className:"text-red-500"})})]},t),j&&m&&(0,l.jsx)(x.Suspense,{children:(0,l.jsx)(U,{projectId:t,name:s,authUserId:o,memberId:N,isAdmin:y,onClose:function(){return f(!1)}})})]})},E=function(){var e=(0,v.rk)().authUser,r=(0,o.Sy)(null===e||void 0===e?void 0:e.id,{skip:!e}),t=r.data,i=r.error,a=(0,x.useState)(!1),u=(0,d.Z)(a,2),m=u[0],h=u[1];return i&&401===i.status?(0,l.jsx)(n.Fg,{to:"/login"}):e?(console.log(t),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-c-1 text-c-5 w-full pt-12 px-10 z-10",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-2xl tracking-wide font-semibold",children:"Projects"}),(0,l.jsx)("button",{onClick:function(){return h(!0)},className:"btn",children:"Create Project"})]}),(0,l.jsx)("div",{className:"mt-8",children:(0,l.jsx)(s.xjn,{children:(0,l.jsxs)(f.BZ,{size:"sm",minW:160,w:160,children:[(0,l.jsx)(f.Z8,{children:(0,l.jsx)(c.JO,{width:20,icon:"ant-design:search-outlined"})}),(0,l.jsx)(f.II,{size:"sm",placeholder:"Search projects"})]})})}),(0,l.jsxs)("div",{className:"flex mt-4 text-sm font-semibold py-1",children:[(0,l.jsx)("div",{className:"w-8"}),(0,l.jsx)("div",{className:"grow px-2 ",children:"Name"}),(0,l.jsx)("div",{className:"grow px-2",children:"Description"}),(0,l.jsx)("div",{className:"w-52 px-2",children:"Lead"})]}),t?0!==t.length?(0,l.jsx)("div",{className:"mt-1 border-t-2 border-c-3",children:t.map((function(r,t){return(0,l.jsx)(T,(0,j.Z)({idx:t,authUserId:e.id},r),r.id)}))}):(0,l.jsx)("div",{className:"text-3xl grid place-items-center mt-[30vh]",children:"You haven't created any project yet!! \ud83d\ude80"}):null]}),m&&(0,l.jsx)(P,{onClose:function(){return h(!1)}})]})):null},S=t(3905),q=t(9333),M=function(e){var r=e.icon,t=e.onClick,n=e.title;return(0,l.jsx)("button",{title:n,onClick:t,className:"rounded-full p-[5px] hover:bg-[#4c3fd1] active:bg-chakra-blue",children:(0,l.jsx)(c.JO,{className:"text-2xl text-white",icon:r})})},I=t(2037),F=(0,x.lazy)((function(){return t.e(308).then(t.bind(t,8308))}));var L=function(e){var r=e.theme.mode,t=e.toggleTheme,i=(0,v.UL)(),c=i.data,a=i.error,o=(0,x.useState)(!1),u=(0,d.Z)(o,2),h=u[0],p=u[1],j=(0,n.s0)();if(a&&401===a.status)return(0,l.jsx)(n.Fg,{to:"/login"});var f=function(){var e=(0,g.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:j("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"flex shrink-0",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between items-center w-14 py-6 bg-primary",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,l.jsx)("button",{title:"Go to Home",onClick:function(){return j("/project")},className:"w-8",children:(0,l.jsx)("img",{src:"/assets/jira.svg",alt:"jira-clone"})}),(0,l.jsx)(s.xjn,{children:(0,l.jsx)(S.r,{title:"Toggle Theme",isChecked:"dark"===r,onChange:function(){t(),localStorage.setItem("jira-clone-theme",JSON.stringify({mode:"light"===r?"dark":"light"}))}})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)(s.xjn,{children:(0,l.jsx)(q.qE,{src:null===c||void 0===c?void 0:c.profileUrl,name:null===c||void 0===c?void 0:c.username,size:"sm",cursor:"pointer",border:"1px solid white",_hover:{borderColor:"tomato"},onClick:function(){return p((function(e){return!e}))},title:"Profile"})}),(0,l.jsx)(M,{onClick:f,icon:"charm:sign-out",title:"Log Out"})]})]}),(0,l.jsx)(m.E.div,{initial:{width:0},animate:{width:h?320:0},transition:{type:"tween"},children:(0,l.jsx)(F,{})})]})};function O(){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)((0,b.Z)().mark((function e(){var r;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.Z.post("auth/logout");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){var r=e.theme,t=e.toggleTheme,s=(0,n.pC)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(L,{theme:r,toggleTheme:t}),(0,l.jsx)(p,{}),s?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("main",{className:"z-10 bg-center bg-c-1 overflow-auto grow",children:[(0,l.jsx)(u,{}),(0,l.jsx)(n.j3,{})]})}):(0,l.jsx)(E,{})]})}},1465:function(e,r,t){var n=t(1413),s=t(184);r.Z=function(e){var r,t=e.darkEnabled,i=void 0!==t&&t,c=e.register,a=e.error,o=e.placeholder,l=e.label,u=e.defaultValue,d=e.readOnly,x=e.autoFocus,m=e.inputClass,h=e.type;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm tracking-wide ".concat(i?"text-c-5":"text-gray-800"),children:l}),(0,s.jsx)("input",(0,n.Z)({defaultValue:null!==u&&void 0!==u?u:"",className:"block w-full focus:border-chakra-blue mt-2 px-3 rounded-sm text-sm py-[3px] border-2 duration-200 outline-none ".concat(i?"hover:bg-c-7 focus:bg-c-1 bg-c-6 text-c-text":"bg-slate-100 hover:border-gray-400"," ").concat(null!==m&&void 0!==m?m:" border-transparent"," ").concat(d?"pointer-events-none":""),placeholder:o,readOnly:d,autoFocus:x,type:h},c)),(0,s.jsx)("span",{className:"text-[13px] text-red-400",children:null===a||void 0===a||null===(r=a.message)||void 0===r?void 0:r.toString()})]})}},6503:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.text,t=e.icon,s=e.className;return(0,n.jsxs)("div",{className:"flex items-center font-normal truncate text-c-1",children:[void 0!==t&&(t?(0,n.jsx)("img",{src:t,alt:r,className:s}):(0,n.jsx)("div",{className:"bg-amber-800 text-white grid place-items-center w-5 h-5 mr-2 rounded-full",children:r.slice(0,1).toUpperCase()})),r]})}},320:function(e,r,t){var n=t(2796),s=t(4164),i=t(184);r.Z=function(e){var r=e.onClose,t=e.onSubmit,c=e.isLoading,a=e.children,o=e.className;return(0,s.createPortal)((0,i.jsx)("div",{onClick:r,className:"fixed top-0 left-0 w-screen h-screen bg-[#0d67cc40] overflow-auto z-20 grid place-items-center",children:(0,i.jsxs)(n.E.div,{className:"rounded-[4px] bg-white p-6 w-[90%] my-8 ".concat(null!==o&&void 0!==o?o:"max-w-[31rem]"),initial:{scale:.9},animate:{scale:1},onClick:function(e){return e.stopPropagation()},children:[a,t&&(0,i.jsxs)("div",{className:"flex justify-end mt-8 gap-x-3",children:[(0,i.jsx)("button",{onClick:r,className:"px-3 py-1 rounded-[3px] text-c-1 hover:bg-c-3",children:"cancel"}),(0,i.jsx)("button",{onClick:t,className:"btn",children:c?"creating ...":"Create"})]})]})}),document.getElementById("portal"))}},9591:function(e,r,t){var n=t(184);r.Z=function(e){var r=e.label,t=e.margin,s=e.labelClass,i=e.children;return(0,n.jsxs)("div",{className:null!==t&&void 0!==t?t:"mt-5",children:[r&&(0,n.jsx)("span",{className:"font-medium text-[14px] text-c-1 mb-2 block "+s,children:r}),i]})}}}]);
//# sourceMappingURL=627.90e8d880.chunk.js.map